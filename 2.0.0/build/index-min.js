/*!build time : 2013-10-21 8:37:05 PM*/
KISSY.add("kg/stepcontrol/2.0.0/index",function(a,b,c){function d(b){var c=this;c.container=a.one(b.container),c.stepCls=b.stepCls||".step",c.nextCls=b.nextCls||".J_NextStep",c.prevCls=b.prevCls||".J_PrevStep",c.currentStepCls=b.currentStepCls||".current-step",c.completeCls=b.completeCls||".complete",c.notPassedAttr=b.notPassedAttr||"data-not-passed",c.asyncFlag=!1,this._init(),d.superclass.constructor.call(c,b)}return b.all,a.extend(d,c,{_init:function(){var a=this;a.bindEvent()},prev:function(a){var b=this,c=a.parent(b.stepCls),d=c.prev(b.stepCls);d&&(b.set("currentStep",b.get("currentStep")-1),b.asyncFlag||b.activeStep(b.get("currentStep")),b.asyncFlag=!1)},next:function(b){var c=this,d=b.parent(c.stepCls),e=d.next(c.stepCls);e&&(c.set("currentStep",c.get("currentStep")+1),a.log("currentStep is:"),a.log(c.get("currentStep")),c.asyncFlag||c.activeStep(c.get("currentStep")),c.asyncFlag=!1)},activeStep:function(b){var c=this;if(!isNaN(b)){c.set("currentStep",b),b-=1;var d=c.container.all(c.stepCls),e=d.item(b);d.each(function(d,e){d=a.one(d),b>e?d.removeClass(c.currentStepCls).addClass(c.completeCls):e==b?d.addClass(c.currentStepCls).removeClass(c.completeCls):d.removeClass(c.currentStepCls).removeClass(c.completeCls)}),c.isGotoStepNode&&c.gotoStepNode(e)}},async:function(a){var b=this;b.asyncFlag=!0,a()},gotoStepNode:function(b){var c=b.offset().top;a.log("top is"),a.log(c),window.scrollTo(0,c)},bindEvent:function(){var b=this;b.container.delegate("click",b.nextCls,function(c){var d=a.one(c.currentTarget);d.hasAttr(b.notPassedAttr)||b.next(a.one(c.currentTarget))}),b.container.delegate("click",b.prevCls,function(c){b.prev(a.one(c.currentTarget))})}},{ATTRS:{currentStep:{value:1}}}),d},{requires:["node","base"]});